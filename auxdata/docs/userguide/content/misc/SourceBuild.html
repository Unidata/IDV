<html>
<head>
  <title>Building the IDV from Source</title>
</head>


<body>

<div class="overview">
Developers can download the source files for the IDV and 
build it from scratch.
</div>

<p>

Before building the IDV you need to first install 
Java and Java 3D on your system.  You need to use the
Java SDK, because the Java RunTime Environment (JRE) does
not contain the Java compiler (javac).  You need to use a version 
of Java 1.4 or 1.5.  You can use either the Java 3D SDK or JRE, 
version 1.3.x.  

<p>

You will also need to install <b>Ant</b> <a
href="http://ant.apache.org/">(http://ant.apache.org/)</a>
on your machine. Ant is similar to make - instead of a
<code class="filename">Makefile</code>, Ant uses a <code
class="filename">build.xml</code> file.  Be sure to follow
the instructions for installing Ant, especially those for
setting up environment variables.


<p>

Download the IDV source files from the Unidata Web Site.



<ol class="step">
  <li>Open the IDV Downloads page in a new window by clicking
      <a href="http://www.unidata.ucar.edu/downloads/idv/latest/index.jsp" target="downloadPage">here</a>.</li>
  <li>To download the IDV source, you must be registered as a Unidata user.
      If you have already registered, log in using your user name
      and password.  If you have not registered or you have forgotten
      your password, follow the instructions on the login sidebar.</li>
  <li>Under &quot;IDV <%idv.version%> Documentation and Source Code&quot;, click on the 
<a href="http://www.unidata.ucar.edu/downloads/idv/latest/ftp/idv_src_<%idv.version%>.jar">
IDV <%idv.version%> Source Code</a> link  to start the download.  You will be prompted for a location
      to save the file to.  Save it your home directory.

  <li>You will also need the set of ancillary libraries (VisAD, netCDF, etc) 
      that the IDV uses contained in the zip file:
<a href="http://www.unidata.ucar.edu/downloads/idv/latest/ftp/idv_jars_<%idv.version%>.zip">
IDV <%idv.version%> JAR Files</a>.
      Save this to your home directory.</li>
  <li>After the download is complete, close the extra browser window. </li>
</ol>

<p>

You are now ready to install the IDV source.</li>

<ol class="step">
  <li>Open a terminal window.</li>

  <li>Change to your home directory or the directory to which you 
      downloaded the source and binary files
      (if you are not already there). </li>

  <li>unJAR the source file. 
    <p><ul>
      <code class="command">jar&nbsp;&nbsp;xvf&nbsp;&nbsp;idv_src_<%idv.version%>.jar</code>
    </ul><p>
    This will create a "metapps" directory underneath the install
    directory (where you unJAR'ed the file).</p>
  </li>

  <li>Next, you need to create a <code class="filename">lib</code>
      directory as a peer of the <code class="filename">ucar</code> 
      directory under <code class="filename">metapps</code> 
      that holds the ancillary JAR files from the 
      <code class="filename">IDV Binary distribution</code>
      that are needed to build the classes.  The structure will 
      look like this:

<pre>
metapps
     |
     +----ucar
     |
     +----lib (holds the ancillary jar files).
</pre>

  </li>

  <li>Change to the <code class="filename">lib</code>
      (if you are not already there). 
    <p><ul>
      <code class="command">cd&nbsp;&nbsp;~/metapps/lib</code>
    </ul><p>
  </li>

  <li>Unzip the file you downloaded into this directory.
    <p><ul>
      <code class="command">unzip&nbsp;&nbsp;../../idv_jars_<%idv.version%>.zip</code>
    </ul><p>
  </li>
</ol>


Now you should be able to build the IDV from scratch.

<ol class="step">

  <li>Change to the <code class="filename">ucar</code> directory.
    <p><ul>
      <code class="command">cd&nbsp;&nbsp;~/metapps/ucar</code>
    </ul><p>
  </li>

  <li>Execute the ant command to build 
      <code class="filename">idv.jar</code>.
    <p><ul>
      <code class="command">ant&nbsp;&nbsp;idvjar</code>
    </ul><p>
    This removes all Java class files (there will be none
    the first time), re-builds them and creates 
    the <code class="filename">idv.jar</code> file, copying 
    it to the lib directory.<p>

  </li><p>

  <li> To run the IDV using your build:<p>
  
    <ul class="substep">
    
      <li>Change to the <code class="filename">lib</code> directory
        <p><ul>
          <code class="command">cd&nbsp;&nbsp;../lib</code>
        </ul><p>
      </li>

      <li>then run:
        <p><ul>
          <code class="command">java&nbsp;&nbsp;-Xmx512m&nbsp;&nbsp;-jar idv.jar</code>
        </ul><p>
      </li>
    </ul>

  </li>

</ol>
 
</body>
</html>
