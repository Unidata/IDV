<html>
<head>
  <title>Installing RAMADDA</title>
  <link rel="stylesheet" type="text/css" href="ramadda.css" title="Style">
</head>

<body>
First you need to download RAMADDA.
The RAMADDA downloads area can be accessed here:<br>
<a href="http://www.unidata.ucar.edu/downloads/ramadda/index.jsp">http://www.unidata.ucar.edu/downloads/ramadda/index.jsp</a>.
<br>
You will need to register at the Unidata site to access the downloads area.
<p>

RAMADDA can run under Tomcat or can run stand-alone with just Java.
To run under Tomcat download the <a href="http://www.unidata.ucar.edu/downloads/ramadda/ftp/repository.war">repository.war</a> file. To run stand alone download the <a href="http://www.unidata.ucar.edu/downloads/ramadda/ftp/repository.zip">repository.zip</a> file.
<p>



<h2>Running under Tomcat</h2>

To run under Tomcat just 
place the repository.war in the tomcat webapps directory. By default the repository is accessed at /repository on the web server.
<p>

You need to specify the ramadda home directory. This is where it looks for properties files and other resources, where the java derby database is stored and where any uploaded data files are stored. 
<p>
By default ramadda will use: <pre>
   &lt;tomcat home&gt;/.unidata/repository</pre>
i.e., the home directory of the process that runs tomcat.
<p>
You can override this a number of ways. What ramadda does is look for the property: ramadda_home in a variety of places, in precedence:

<ol>

<li> In the web.xml<br>
In the web.xml  in the repository.war you can specify command line properties:<pre>
    &lt;param-value&gt;-Dramadda_home=/home/dir&lt;/param-value&gt;
</pre>
The problem with this is you have to unjar the war and change the web.xml. Then, when you install a 
new release you have to repeat the process.

<li> As a Java environment variable<br>
Wherever you define the arguments that are passed to <i>java</i> when starting Tomcat include:<pre>
-Dramadda_home=/home/dir
</pre>
e.g.:<pre>java -Xmx512m  -Dramadda_home=/home/dir
</pre>

<li> As a process environment variable.<br>
Environment variables can be set for the tomcat process
Just define:<pre>ramadda_home=/home/dir</pre>
</ol>

<a name="ssl"></a>
<h3>Configuring SSL under Tomcat</h3>
If you have your Tomcat server configured for SSL access all you need to do is to tell RAMADDA what port it is running under. Add the property:
<pre>
ramadda.ssl.port=&lt;the ssl port&gt;
</pre>
to any .properties file in the RAMADDA home directory (See <a href="#properties">below</a>).
<p>

<b>Note: When you define an SSL port then RAMADDA will automatically redirect all login and admin requests
to that port. If your Tomcat server is not really configured for SSL then you will not be able to access RAMADDA. See the <a href="faq.html#fixssl">FAQ</a> for how to fix this.</b>



<h2>Running Standalone</h2>
You can run RAMADDA stand-alone. This is really useful for development and just requires  Java 1.6 or greater. First, download and unzip the <a href="http://www.unidata.ucar.edu/downloads/ramadda/ftp/repository.zip">repository.zip</a> file.
<p>
To run RAMADDA run the ramadda.sh in the release directory. This just does:<pre>
   java -Xmx512m -jar repository.jar
</pre>


By default the server is on port 8080.  To change the port do:<pre>
    java -Xmx512m -jar repository.jar -port &lt;some port&gt;
</pre>

RAMADDA creates a local storage directory in:<pre>
&lt;home dir&gt;/.unidata/repository</pre>

To change this do:<pre>
    java -Xmx512m -jar repository.jar -Dramadda_home=/home/dir
</pre>





<a name="ssljetty"></a>
<h3>Configuring SSL when running standalone</h3>
To configure secure SSL access to a stand-alone version of RAMADDA you need to
generate a keystore and an optional certificate. There are instructions 
<a href="http://docs.codehaus.org/display/JETTY/How+to+configure+SSL">here</a>.
Ignore the step 4 as RAMADDA uses the below method to specify password, port, etc.
<p>
Once you have your keystore file generated you can copy it to the RAMADDA home directory as file &quot;keystore&quot;. You then need to specify some configuration options for RAMADDA through a .properties file that you place in the RAMADDA home directory. e.g., ssl.properties:

<pre>
ramadda.ssl.password=&lt;the password&gt;
ramadda.ssl.keypassword=&lt;the keystore password&gt;
ramadda.ssl.port=&lt;the ssl port&gt;

#You can override the location of the keystore. The default is:
#&lt;repository dir&gt;/keystore
#ramadda.ssl.keystore=alternative path to keystore

#If you want to skip ssl for now set this to true
#ramadda.ssl.ignore=true

</pre>

Alternatively you can specify these as command line arguments:
<pre>
-Dramadda.ssl.password=&lt;the password&gt; -Dramadda.ssl.keypassword=&lt;the keystore password&gt; -Dramadda.ssl.port=&lt;the ssl port&gt;
</pre>



<a name="directory"></a>

<h2>Directory Structure</h2>
Under the home directory RAMADDA will create the following subdirectories:

<ul>

<a name="htdocs"></a>
<li> htdocs<br>
This is where RAMADDA will first look for any static web content that it is serving.  If it cannot find the file here
it looks in its internal system area. So, if you want to change the system style sheet, the logo.png file or any other web
content just place it here.
<p>
Note: Files here are relative to the top-level repository path. For example, if you have a URL:<pre>
    http://yourserver.edu/repository/somefile.gif
</pre>
Then RAMADDA will strip off the &quot;repository&quot; prefix and look for a file in the RAMADDA home dir:<pre>
    htdocs/somefile.gif
</pre>

If you had a URL:<pre>
    http://yourserver.edu/repository/somedir/somefile.gif
</pre>
Then RAMADDA looks in:<pre>
    htdocs/somedir/somefile.gif
</pre>





<li> logs<br>
Holds the log files.

<li> plugins<br>
RAMADDA has a plugin mechanism and it looks in this directory for the plugins.

<li> resources<br>
This is where RAMADDA will first look for any internal resources (e.g., html template files, etc.)


<li> storage<br>
This is where the uploaded  files are stored. The directory strucuture is:<pre>
y&lt;the year&gt;/m&lt;the month&gt;/d&lt;the day&gt;/the files
</pre>
There is also an upload  directory  that holds any anonymously uploaded files.

<li>entries<br>
This is where any attachments or any other file associated with an entry (except for the actual entry file) is held.

<li> tmp<br>
A temporary file space. RAMADDA manages the scouring ,etc., of old files.

<li> derby<br>
If you are running with the Derby database this directory holds the database

</ul>



<h2>Configuration</h2>

RAMADDA for the most part can be configured through the <a href="admin.html">Admin pages</a>. When you are logged in to 
RAMADDA as an administrator there should be a &quot;Admin&quot; on the left side of the page.
<p>
<a name="tasks"></a>
Common tasks include:
<ul>
<li> Change the  repository title and logo in the <a href="admin.html#display">Admin-&gt;Settings-&gt;Display</a>
<li> Setting up an email server so RAMADDA can send email to users (e.g., for password notification). This is done on the
<a href="admin.html#contact">Admin-&gt;Settings-&gt;Site and Contact Information</a>  page.
<li> Adding <a href="adminusers.html">new users</a>.
<li> Creating new <a href="newentry.html">groups and uploading files</a>.
<li> Defining where RAMADDA <a href="admin.html#access">can serve files from</a>.
<li> Limiting <a href="access.html">access</a> to certain parts of the repository.
</ul>


<h3>Changing the Main Page</h3>

To change the presentation of the main entry page (the top-level RAMADDA page) you simply change the name and description
for the Entry. You do this with the <b>Edit-&gt;Edit Entry</b> menu.
<p>

You can use the <a href="wiki.html#wikidesc">wiki text facility (see &quot;Wiki Text in Other Entries&quot;)</a> for the description 
to customize the look and feel. 
For example, on our main <a href="http://motherlode.ucar.edu/repository">RAMADDA site</a> we have changed the name
of the top level Entry to &quot;RAMADDA&quot;. We also have this for the description:<pre>

&lt;wiki&gt;
Welcome to Unidata's RAMADDA data repository. 
RAMADDA is a content management system with a focus on Earth Science data.

More information is available \[http://www.unidata.ucar.edu/software/ramadda/index.html here\].

===Links:===
{{children title="Links" showhide="false"}}
</pre>



<h3>Other Configuration Options</h3>
For other  configuration options RAMADDA looks in its home directory for any .properties files.
The first one it loads is &quot;repository.properties&quot;.
To configure RAMADDA create a repository.properties file or
copy <a href="repository.properties">this one</a>. The properties
defined in the local file override the ones defined in the system file.
<p>
In the source release the system properties file can be viewed:<br>
/ucar/unidata/repository/resources/repository.properties




<h3>Configuring the Database</h3>
By default RAMADDA uses a built in Java Derby database. 
RAMADDA also runs
using mysql and postgres (though the postgres hasn't been test in a while).
Derby works pretty well though we have seen some performance issues with search.
If you are planning on really using RAMADDA and foresee a large amount of content stored in the
repository (by large we don't mean  file size but rather we mean number of entries in the repository)
then its probably a good idea to use mysql or postgres. 
<p>

To define the database just uncomment the appropriate  ramadda.db properties in repository.properties:
<pre>
ramadda.db=derby
#ramadda.db=mysql
#ramadda.db=postgres
</pre>


The mysql database and user/password is defined in the repository.properties 
file. To change the port or server the database is on and to change the user name/password
just edit:
<pre>
ramadda.db.mysql.url=jdbc:mysql://localhost:3306/repository?zeroDateTimeBehavior=convertToNull
ramadda.db.mysql.user=the database user
ramadda.db.mysql.password=the database password
</pre>







</body>
